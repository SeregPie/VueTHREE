!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("three")):"function"==typeof define&&define.amd?define(["three"],t):e.VueThree=t(e.THREE)}(this,function(r){"use strict";function e(e){return{created:function(){var t=this;e.forEach(function(e){t.$watch(e)})}}}var t={color:{type:[Number,String],default:0},near:{type:Number,default:1},far:{type:Number,default:1e3}};var n={fog:function(){return new r.Fog}};var i={name:"VueThreeFog",mixins:[e([function(){this.fog.color.set(this.color)},function(){this.fog.near=this.near},function(){this.fog.far=this.far}])],props:t,computed:n,created:function(){this.$parent.object.fog=this.fog},beforeDestroy:function(){this.$parent.object.fog=null},render:function(e){return e("div")}};var o={position:{type:[Array,Object],default:function(){return[0,0,0]}},quaternion:{type:[Array,Object],default:function(){return[0,0,0,1]}},scale:{type:[Number,Array,Object],default:1},name:{type:String,default:""},userData:{default:function(){return{}}}};var a={object:function(){return new r.Object3D},renderer:function(){return this.$parent.renderer}};function s(e){return e&&"object"==typeof e}function c(e,t){return Array.isArray(t)?e.fromArray(t):s(t)?Object.assign(e,t):"number"==typeof t&&e.setScalar(t),e}var u={object:{handler:function(e,t){t&&(this.$parent.object.remove(t),this.dispose(t)),e&&this.$parent.object.add(e)},immediate:!0}};var f={dispose:function(){}};var h={name:"VueThreeObject",mixins:[e([function(){c(this.object.position,this.position)},function(){var e,t;e=this.object.quaternion,t=this.quaternion,Array.isArray(t)?e.fromArray(t):s(t)&&Object.assign(e,t)},function(){c(this.object.scale,this.scale)},function(){this.object.name=this.name},function(){this.object.userData=this.userData}])],props:o,computed:a,watch:u,beforeDestroy:function(){this.$parent.object.remove(this.object),this.dispose(this.object)},methods:f,render:function(e){return e("div",this.$slots.default)}},d={fov:{type:Number,default:50},near:{type:Number,default:.1},far:{type:Number,default:2e3}};var l={object:function(){return new r.PerspectiveCamera}};var p={name:"VueThreePerspectiveCamera",mixins:[h,e([function(){this.object.fov=this.fov},function(){this.object.near=this.near},function(){this.object.far=this.far}])],props:d,computed:l,created:function(){this.$parent.$parent.camera=this.object},beforeDestroy:function(){this.$parent.$parent.camera=null}},m={color:{type:[Number,String],default:16777215},intensity:{type:Number,default:1},distance:{type:Number,default:0},decay:{type:Number,default:1}};var b={object:function(){return new r.PointLight}},y={name:"VueThreePointLight",mixins:[h,e([function(){this.object.color.set(this.color)},function(){this.object.intensity=this.intensity},function(){this.object.distance=this.distance},function(){this.object.decay=this.decay}])],props:m,computed:b},v="frozenData_";var j={antialias:{type:Boolean,default:!0},alpha:{type:Boolean,default:!1},clearColor:{type:[Number,String],default:0},clearAlpha:{type:Number,default:1},preserveDrawingBuffer:{type:Boolean,default:!1}};var g={renderer:function(){var e=this.alpha,t=this.antialias,n=this.preserveDrawingBuffer;return new r.WebGLRenderer({alpha:e,antialias:t,preserveDrawingBuffer:n})}};var $={detectElementResize:function(){this.elementWidth=this.$el.offsetWidth,this.elementHeight=this.$el.offsetHeight},renderScene:function(){var e=this.renderer,t=this.scene,n=this.camera;e&&t&&n&&e.render(t,n)},startElementResizeDetector:function(){var e=this;requestAnimationFrame(function(){e._isDestroyed||(setTimeout(function(){e.startElementResizeDetector()},1e3),e.detectElementResize())})},startSceneRenderer:function(){var e=this;requestAnimationFrame(function(){e._isDestroyed||(setTimeout(function(){e.startSceneRenderer()},1e3),e.renderScene())})}};var w,D={name:"VueThreeRenderer",mixins:[(w=function(){return{scene:null,camera:null}},{data:function(){var r={},i={};return Object.entries(w).forEach(function(e){var t=e[0],n=e[1];r[v+t]={},i[t]={get:function(){return this[v+t],n},set:function(e){n=e,this[v+t]={}}}}),Object.assign(this.$options.computed,i),r}}),e([function(){var e=this.renderer,t=this.camera,n=this.elementWidth,r=this.elementHeight;e.setSize(n,r),0<n&&0<r&&t&&(t.aspect=n/r,t.updateProjectionMatrix())},function(){this.renderer.setClearColor(this.clearColor,this.clearAlpha)}])],props:j,data:function(){return{elementWidth:0,elementHeight:0}},computed:g,mounted:function(){this.$refs.canvasContainer.appendChild(this.renderer.domElement),this.startElementResizeDetector(),this.startSceneRenderer()},methods:$,render:function(e){return e("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden"}},[e("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0},ref:"canvasContainer"},this.$slots.default)])}};var S={name:"VueThreeScene",computed:{object:function(){return new r.Scene},renderer:function(){return this.$parent.renderer}},created:function(){this.$parent.scene=this.object},beforeDestroy:function(){this.$parent.scene=null},render:function(e){return e("div",this.$slots.default)}},A=Object.freeze({Fog:i,Object:h,PerspectiveCamera:p,PointLight:y,Renderer:D,Scene:S}),N=Object.assign({},{install:function(t){Object.values(this.components).forEach(function(e){t.component(e.name,e)})},components:A},A);return"undefined"!=typeof window&&window.Vue&&window.Vue.use(N),N});
