!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("three")):"function"==typeof define&&define.amd?define(["three"],t):e.VueThree=t(e.THREE)}(this,function(r){"use strict";function e(e){return{created:function(){var t=this;e.forEach(function(e){t.$watch(e)})}}}var t={color:{type:[Number,String],default:0},near:{type:Number,default:1},far:{type:Number,default:1e3}};var n={fog:function(){return new r.Fog}};var i={name:"VueThreeFog",mixins:[e([function(){this.fog.color.set(this.color)},function(){this.fog.near=this.near},function(){this.fog.far=this.far}])],props:t,computed:n,created:function(){this.$parent.object.fog=this.fog},beforeDestroy:function(){this.$parent.object.fog=null},render:function(e){return e("div")}},o={position:{type:Array,default:function(){return[0,0,0]}},quaternion:{type:Array,default:function(){return[0,0,0,1]}},scale:{type:Array,default:[1,1,1]},name:{type:String,default:""},userData:{default:function(){return{}}}};var a={object:function(){return new r.Object3D},renderer:function(){return this.$parent.renderer}},s={object:{handler:function(e,t){t&&(this.$parent.object.remove(t),this.dispose(t)),e&&this.$parent.object.add(e)},immediate:!0}};var c={dispose:function(){}};var u={name:"VueThreeObject",mixins:[e([function(){this.object.position.fromArray(this.position)},function(){this.object.quaternion.fromArray(this.quaternion)},function(){this.object.scale.fromArray(this.scale)},function(){this.object.name=this.name},function(){this.object.userData=this.userData}])],props:o,computed:a,watch:s,beforeDestroy:function(){this.$parent.object.remove(this.object),this.dispose(this.object)},methods:c,render:function(e){return e("div",this.$slots.default)}},f={fov:{type:Number,default:50},near:{type:Number,default:.1},far:{type:Number,default:2e3}};var h={object:function(){return new r.PerspectiveCamera}};var d={name:"VueThreePerspectiveCamera",mixins:[u,e([function(){this.object.fov=this.fov},function(){this.object.near=this.near},function(){this.object.far=this.far}])],props:f,computed:h,created:function(){this.$parent.$parent.camera=this.object},beforeDestroy:function(){this.$parent.$parent.camera=null}},l={color:{type:[Number,String],default:16777215},intensity:{type:Number,default:1},distance:{type:Number,default:0},decay:{type:Number,default:1}};var p={object:function(){return new r.PointLight}},m={name:"VueThreePointLight",mixins:[u,e([function(){this.object.color.set(this.color)},function(){this.object.intensity=this.intensity},function(){this.object.distance=this.distance},function(){this.object.decay=this.decay}])],props:l,computed:p},b="frozenData_";var y={antialias:{type:Boolean,default:!0},alpha:{type:Boolean,default:!1},clearColor:{type:[Number,String],default:0},clearAlpha:{type:Number,default:1},preserveDrawingBuffer:{type:Boolean,default:!1}};var v={renderer:function(){var e=this.alpha,t=this.antialias,n=this.preserveDrawingBuffer;return new r.WebGLRenderer({alpha:e,antialias:t,preserveDrawingBuffer:n})}};var j={detectElementResize:function(){this.elementWidth=this.$el.offsetWidth,this.elementHeight=this.$el.offsetHeight},renderScene:function(){var e=this.renderer,t=this.scene,n=this.camera;e&&t&&n&&e.render(t,n)},startElementResizeDetector:function(){var e=this;requestAnimationFrame(function(){e._isDestroyed||(setTimeout(function(){e.startElementResizeDetector()},1e3),e.detectElementResize())})},startSceneRenderer:function(){var e=this;requestAnimationFrame(function(){e._isDestroyed||(setTimeout(function(){e.startSceneRenderer()},1e3),e.renderScene())})}};var g,$,w={name:"VueThreeRenderer",mixins:[(g=function(){return{scene:null,camera:null}},$={data:function(){var r={};return Object.entries(g).forEach(function(e){var t=e[0],n=e[1];r[b+t]=Object.freeze([n])}),r},computed:{}},Object.keys(g).forEach(function(t){$.computed[t]={get:function(){return this[b+t][0]},set:function(e){return this[b+t]=Object.freeze([e])}}}),$),e([function(){var e=this.renderer,t=this.camera,n=this.elementWidth,r=this.elementHeight;e.setSize(n,r),0<n&&0<r&&t&&(t.aspect=n/r,t.updateProjectionMatrix())},function(){this.renderer.setClearColor(this.clearColor,this.clearAlpha)}])],props:y,data:function(){return{elementWidth:0,elementHeight:0}},computed:v,mounted:function(){this.$refs.canvasContainer.appendChild(this.renderer.domElement),this.startElementResizeDetector(),this.startSceneRenderer()},methods:j,render:function(e){return e("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden"}},[e("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0},ref:"canvasContainer"},this.$slots.default)])}};var D={name:"VueThreeScene",computed:{object:function(){return new r.Scene},renderer:function(){return this.$parent.renderer}},created:function(){this.$parent.scene=this.object},beforeDestroy:function(){this.$parent.scene=null},render:function(e){return e("div",this.$slots.default)}},S=Object.freeze({Fog:i,Object:u,PerspectiveCamera:d,PointLight:m,Renderer:w,Scene:D}),E=Object.assign({},{install:function(t){Object.values(this.components).forEach(function(e){t.component(e.name,e)})},components:S},S);return"undefined"!=typeof window&&window.Vue&&window.Vue.use(E),E});
