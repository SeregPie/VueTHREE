!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("three")):"function"==typeof define&&define.amd?define(["vue","three"],t):e.VueTHREE=t(e.Vue,e.THREE)}(this,function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(e){try{return e.getBoundingClientRect()}catch(o){try{var t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}}catch(e){return{width:0,height:0}}}},o=function(){},r={name:"VueThreeRenderer",render:function(e){return e("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},this.$slots.default)},props:{antialias:{type:Boolean,default:!0},alpha:{type:Boolean,default:!1},clearColor:{type:[String,Number],default:0},clearAlpha:{type:Number,default:1},preserveDrawingBuffer:{type:Boolean,default:!1},renderSceneInterval:{type:Number,default:1e3/60},updateContainerSizeInterval:{type:Number,default:1e3}},data:function(){return{containerWidth:0,containerHeight:0,frozen$renderer:Object.freeze({o:new t.WebGLRenderer({alpha:this.alpha,antialias:this.antialias,preserveDrawingBuffer:this.preserveDrawingBuffer})}),frozen$scene:{o:null},frozen$camera:{o:null}}},beforeCreate:function(){var e=this;Object.entries({updateRendererSize:function(){this.renderer.setSize(this.containerWidth,this.containerHeight),this.containerWidth>0&&this.containerHeight>0&&this.camera&&(this.camera.aspect=this.containerWidth/this.containerHeight,this.camera.updateProjectionMatrix())},setClearColor:function(){this.renderer.setClearColor(this.clearColor,this.clearAlpha)}}).forEach(function(t){var n=t[0],r=t[1];e.$options.computed[n]=r,e.$options.watch[n]=o})},mounted:function(){this.$el.appendChild(this.renderer.domElement),this.updateContainerSizeScheduler(),this.renderSceneScheduler()},computed:{renderer:function(){return this.frozen$renderer.o},scene:{get:function(){return this.frozen$scene.o},set:function(e){return this.frozen$scene=Object.freeze({o:e})}},camera:{get:function(){return this.frozen$camera.o},set:function(e){return this.frozen$camera=Object.freeze({o:e})}},updateContainerSizeScheduler:function(){return function(){var e=this;this._isDestroyed||(setTimeout(function(){requestAnimationFrame(function(){e.updateContainerSizeScheduler()})},this.updateContainerSizeInterval),this.updateContainerSize())}},renderSceneScheduler:function(){return function(){var e=this;this._isDestroyed||(setTimeout(function(){requestAnimationFrame(function(){e.renderSceneScheduler()})},this.renderSceneInterval),this.renderScene())}}},watch:{},methods:{updateContainerSize:function(){var e=n(this.$el),t=e.width,o=e.height;this.containerWidth=t,this.containerHeight=o},renderScene:function(){this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}}},i=function(e,t){Array.isArray(t)?e.fromArray(t):Number.isFinite(t)?e.setScalar(t):Object.assign(e,t)},a=function(e,t){Array.isArray(t)?e.fromArray(t):Object.assign(e,t)},u={name:"VueThreeObject",render:function(e){return e("div",this.$slots.default)},props:{position:{type:[Object,Array],default:function(){return[0,0,0]}},quaternion:{type:[Object,Array],default:function(){return[0,0,0,1]}},scale:{type:[Object,Array,Number],default:1}},THREE:{object:function(){return new t.Object3D}},data:function(){return{frozen$object:Object.freeze({o:this.$options.THREE.object.call(this)})}},beforeCreate:function(){var e=this;Object.entries({updatePosition:function(){i(this.object.position,this.position)},updateQuaternion:function(){a(this.object.quaternion,this.quaternion)},updateScale:function(){i(this.object.scale,this.scale)}}).forEach(function(t){var n=t[0],r=t[1];e.$options.computed[n]=r,e.$options.watch[n]=o})},mounted:function(){this.$parent.object.add(this.object)},beforeDestroy:function(){this.$parent.object.remove(this.object)},computed:{object:function(){return this.frozen$object.o},renderer:function(){return this.$parent.renderer}},watch:{}},c={name:"VueThreeScene",render:function(e){return e("div",this.$slots.default)},data:function(){return{frozen$object:Object.freeze({o:new t.Scene})}},created:function(){this.$parent.scene=this.object},computed:{object:function(){return this.frozen$object.o},renderer:function(){return this.$parent.renderer}}},s={name:"VueThreeFog",render:function(e){return e("div")},props:{color:{type:[Number,String],default:0},near:{type:Number,default:1},far:{type:Number,default:1e3}},data:function(){return{frozen$fog:Object.freeze({o:new t.Fog})}},mounted:function(){this.$parent.object.fog=this.fog},beforeCreate:function(){var e=this;Object.entries({updateColor:function(){this.fog.color.set(this.color)},updateNear:function(){this.fog.near=this.near},updateFar:function(){this.fog.far=this.far}}).forEach(function(t){var n=t[0],r=t[1];e.$options.computed[n]=r,e.$options.watch[n]=o})},beforeDestroy:function(){this.$parent.object.fog=null},computed:{fog:function(){return this.frozen$fog.o}},watch:{}},h={name:"VueThreePerspectiveCamera",mixins:[u],render:u.render,props:{fov:{type:Number,default:50},near:{type:Number,default:.1},far:{type:Number,default:2e3}},THREE:{object:function(){return new t.PerspectiveCamera}},beforeCreate:function(){var e=this;Object.entries({updateFov:function(){this.object.fov=this.fov},updateNear:function(){this.object.near=this.near},updateFar:function(){this.object.far=this.far}}).forEach(function(t){var n=t[0],r=t[1];e.$options.computed[n]=r,e.$options.watch[n]=o})},created:function(){this.$parent.$parent.camera=this.object},computed:{},watch:{}},f={name:"VueThreeOrbitControls",render:function(e){return e("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}})},props:{position:{type:[Object,Array],default:function(){return[0,0,0]}},quaternion:{type:[Object,Array],default:function(){return[0,0,0,1]}},enabled:{type:Boolean,default:!0},minDistance:{type:Number,default:0},maxDistance:{type:Number,default:1/0},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:1/0},minPolarAngle:{type:Number,default:0},maxPolarAngle:{type:Number,default:Math.PI},minAzimuthAngle:{type:Number,default:-1/0},maxAzimuthAngle:{type:Number,default:1/0},enableDamping:{type:Boolean,default:!1},dampingFactor:{type:Number,default:.25},enableZoom:{type:Boolean,default:!0},zoomSpeed:{type:Number,default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{type:Number,default:1},enablePan:{type:Boolean,default:!0},keyPanSpeed:{type:Number,default:7},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{type:Number,default:2},enableKeys:{type:Boolean,default:!0},updateControlsInterval:{type:Number,default:1e3/60}},data:function(){return{frozen$controls:Object.freeze({o:null})}},beforeCreate:function(){var e=this;Object.entries({updateEnabled:function(){this.controls.enabled=this.enabled},updateMinDistance:function(){this.controls.minDistance=this.minDistance},updateMaxDistance:function(){this.controls.maxDistance=this.maxDistance},updateMinZoom:function(){this.controls.minZoom=this.minZoom},updateMaxZoom:function(){this.controls.maxZoom=this.maxZoom},updateMinPolarAngle:function(){this.controls.minPolarAngle=this.minPolarAngle},updateMaxPolarAngle:function(){this.controls.maxPolarAngle=this.maxPolarAngle},updateMinAzimuthAngle:function(){this.controls.minAzimuthAngle=this.minAzimuthAngle},updateMaxAzimuthAngle:function(){this.controls.maxAzimuthAngle=this.maxAzimuthAngle},updateEnableDamping:function(){this.controls.enableDamping=this.enableDamping},updateDampingFactor:function(){this.controls.dampingFactor=this.dampingFactor},updateEnableZoom:function(){this.controls.enableZoom=this.enableZoom},updateZoomSpeed:function(){this.controls.zoomSpeed=this.zoomSpeed},updateEnableRotate:function(){this.controls.enableRotate=this.enableRotate},updateRotateSpeed:function(){this.controls.rotateSpeed=this.rotateSpeed},updateEnablePan:function(){this.controls.enablePan=this.enablePan},updateKeyPanSpeed:function(){this.controls.keyPanSpeed=this.keyPanSpeed},updateAutoRotate:function(){this.controls.autoRotate=this.autoRotate},updateAutoRotateSpeed:function(){this.controls.autoRotateSpeed=this.autoRotateSpeed},updateEnableKeys:function(){this.controls.enableKeys=this.enableKeys}}).forEach(function(t){var n=t[0],r=t[1];e.$options.computed[n]=function(){this.controls&&r.call(this)},e.$options.watch[n]=o})},mounted:function(){var e=new t.PerspectiveCamera;i(e.position,this.position),a(e.quaternion,this.quaternion),this.frozen$controls=Object.freeze({o:new t.OrbitControls(e,this.$el)}),this.updateControlsScheduler()},beforeDestroy:function(){this.controls&&this.controls.dispose()},computed:{controls:function(){return this.frozen$controls.o},updateControlsScheduler:function(){return function(){var e=this;this._isDestroyed||(setTimeout(function(){requestAnimationFrame(function(){e.updateControlsScheduler()})},this.updateControlsInterval),this.updateControls())}}},watch:{},methods:{updateControls:function(){this.controls&&(this.controls.update(),this.$emit("update:position",this.controls.object.position.toArray()),this.$emit("update:quaternion",this.controls.object.quaternion.toArray()))}}},d={name:"VueThreePointLight",mixins:[u],render:u.render,props:{color:{type:[Number,String],default:16777215},intensity:{type:Number,default:1},distance:{type:Number,default:0},decay:{type:Number,default:1}},THREE:{object:function(){return new t.PointLight}},beforeCreate:function(){var e=this;Object.entries({updateColor:function(){this.object.color.set(this.color)},updateIntensity:function(){this.object.intensity=this.intensity},updateDistance:function(){this.object.distance=this.distance},updateDecay:function(){this.object.decay=this.decay}}).forEach(function(t){var n=t[0],r=t[1];e.$options.computed[n]=r,e.$options.watch[n]=o})},computed:{},watch:{}};return e.component(r.name,r),e.component(u.name,u),e.component(c.name,c),e.component(s.name,s),e.component(h.name,h),e.component(f.name,f),e.component(d.name,d),{Renderer:r,Object3D:u,Scene:c,Fog:s,PerspectiveCamera:h,OrbitControls:f,PointLight:d}});
